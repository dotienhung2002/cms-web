{"ast":null,"code":"import _slicedToArray from \"/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/src/views/pages/authentication/Login.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport Avatar from \"@Components/avatar\";\nimport InputPasswordToggle from \"@Components/input-password-toggle\";\nimport { SCHEMA_LOGIN } from \"@Constants/constValidate\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useSkin } from \"@Hooks/useSkin\";\nimport { handleLogin } from \"@Store/actions/auth\";\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from \"@Utils\";\nimport classnames from \"classnames\";\nimport { Fragment, useState } from \"react\";\nimport { Coffee } from \"react-feather\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { Slide, toast } from \"react-toastify\";\nimport { Button, CardTitle, Col, Form, FormGroup, Input, Label, Row, Spinner } from \"reactstrap\";\nimport * as yup from \"yup\";\nimport Service from \"../../../helper/request\";\nimport api from \"@Constants/api\";\nimport \"@Styles/base/pages/page-auth.scss\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar ToastContent = function ToastContent(_ref) {\n  var name = _ref.name,\n      roleName = _ref.roleName;\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toastify-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          size: \"sm\",\n          color: \"success\",\n          icon: /*#__PURE__*/_jsxDEV(Coffee, {\n            size: 12\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 49\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"toast-title font-weight-bold\",\n          children: [\"Xin ch\\xE0o, \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 3\n  }, _this);\n};\n\n_c = ToastContent;\nvar schema = yup.object(SCHEMA_LOGIN).required();\n\nvar Login = function Login(props) {\n  _s();\n\n  var _errors$username, _errors$password;\n\n  var _useSkin = useSkin(),\n      _useSkin2 = _slicedToArray(_useSkin, 1),\n      skin = _useSkin2[0];\n\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      disable = _useState2[0],\n      setDisable = _useState2[1];\n\n  var _useForm = useForm({\n    resolver: yupResolver(schema),\n    mode: \"all\"\n  }),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.formState.errors;\n\n  var illustration = skin === \"dark\" ? \"login-v2-dark.svg\" : \"login-v2.svg\",\n      source = require(\"@Assets/images/pages/\".concat(illustration)).default;\n\n  var onSubmit = function onSubmit(data) {\n    if (isObjEmpty(errors)) {\n      setDisable(true);\n      Service.send({\n        method: api.EMPLOYEE_LOGIN.method,\n        path: api.EMPLOYEE_LOGIN.path,\n        data: data\n      }).then(function (result) {\n        if (result) {\n          var status = result.status,\n              access_token = result.access_token,\n              refresh_token = result.refresh_token,\n              information = result.information;\n\n          if (status === 200) {\n            var newData = {\n              information: information,\n              accessToken: access_token,\n              refreshToken: refresh_token\n            };\n            dispatch(handleLogin(newData)); // history(getHomeRouteForLoggedInUser('admin'))\n\n            toast.success( /*#__PURE__*/_jsxDEV(ToastContent, {\n              name: newData.information.name || newData.information.username || \"John Doe\",\n              roleName: newData.roleName || \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, _this), {\n              transition: Slide,\n              hideProgressBar: true,\n              autoClose: 2000\n            });\n            setTimeout(function () {\n              window.location.href = getHomeRouteForLoggedInUser(\"admin\");\n            }, 1500);\n          } else {\n            setDisable(false);\n          }\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-wrapper auth-v2\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"auth-inner m-0\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        className: \"d-none d-lg-flex align-items-center p-5\",\n        lg: \"8\",\n        sm: \"12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-100 d-lg-flex align-items-center justify-content-center px-5\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"img-fluid\",\n            src: source,\n            alt: \"Login V2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"d-flex align-items-center auth-bg px-2 p-lg-5\",\n        lg: \"4\",\n        sm: \"12\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          className: \"px-xl-2 mx-auto\",\n          sm: \"8\",\n          md: \"6\",\n          lg: \"12\",\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            tag: \"h2\",\n            className: \"font-weight-bold mb-1\",\n            children: \"\\u0110\\u0103ng nh\\u1EADp! \\uD83D\\uDC4B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Form, {\n            className: \"auth-login-form mt-2\",\n            onSubmit: handleSubmit(onSubmit),\n            children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Label, {\n                className: \"form-label\",\n                for: \"login-username\",\n                children: \"T\\xEAn t\\xE0i kho\\u1EA3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(Input, {\n                name: \"username\",\n                className: classnames({\n                  \"is-invalid\": errors[\"username\"]\n                }),\n                innerRef: register\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-danger\",\n                children: (_errors$username = errors.username) === null || _errors$username === void 0 ? void 0 : _errors$username.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(FormGroup, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(Label, {\n                  className: \"form-label\",\n                  for: \"login-password\",\n                  children: \"M\\u1EADt kh\\u1EA9u\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 19\n                }, _this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/cms/forgot-password\",\n                  children: /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: \"Qu\\xEAn m\\u1EADt kh\\u1EA9u?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 19\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(InputPasswordToggle, {\n                name: \"password\",\n                className: classnames({\n                  \"is-invalid\": errors[\"password\"]\n                }),\n                innerRef: register\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-danger\",\n                children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Button.Ripple, {\n              type: \"submit\",\n              color: \"primary\",\n              block: true,\n              disabled: disable,\n              children: disable ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Spinner, {\n                  size: \"sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-50\",\n                  children: \"\\u0110ang \\u0111\\u0103ng nh\\u1EADp...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true) : \"Đăng nhập\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Login, \"yp2qPjUFcwm68EGHp+TmZfXAKaw=\", false, function () {\n  return [useSkin, useDispatch, useForm];\n});\n\n_c2 = Login;\nexport default Login;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ToastContent\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/src/views/pages/authentication/Login.js"],"names":["Avatar","InputPasswordToggle","SCHEMA_LOGIN","yupResolver","useSkin","handleLogin","getHomeRouteForLoggedInUser","isObjEmpty","classnames","Fragment","useState","Coffee","useForm","useDispatch","Slide","toast","Button","CardTitle","Col","Form","FormGroup","Input","Label","Row","Spinner","yup","Service","api","Link","useHistory","ToastContent","name","roleName","schema","object","required","Login","props","skin","dispatch","disable","setDisable","resolver","mode","register","handleSubmit","errors","formState","illustration","source","require","default","onSubmit","data","send","method","EMPLOYEE_LOGIN","path","then","result","status","access_token","refresh_token","information","newData","accessToken","refreshToken","success","username","transition","hideProgressBar","autoClose","setTimeout","window","location","href","message","password"],"mappings":"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","sourcesContent":["import Avatar from \"@Components/avatar\";\nimport InputPasswordToggle from \"@Components/input-password-toggle\";\nimport { SCHEMA_LOGIN } from \"@Constants/constValidate\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useSkin } from \"@Hooks/useSkin\";\nimport { handleLogin } from \"@Store/actions/auth\";\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from \"@Utils\";\nimport classnames from \"classnames\";\nimport { Fragment, useState } from \"react\";\nimport { Coffee } from \"react-feather\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { Slide, toast } from \"react-toastify\";\nimport {\n  Button,\n  CardTitle,\n  Col,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n  Row,\n  Spinner\n} from \"reactstrap\";\nimport * as yup from \"yup\";\nimport Service from \"../../../helper/request\";\n\nimport api from \"@Constants/api\";\nimport \"@Styles/base/pages/page-auth.scss\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst ToastContent = ({ name, roleName }) => (\n  <Fragment>\n    <div className=\"toastify-header\">\n      <div className=\"title-wrapper\">\n        <Avatar size=\"sm\" color=\"success\" icon={<Coffee size={12} />} />\n        <h6 className=\"toast-title font-weight-bold\">Xin chào, {name}</h6>\n      </div>\n    </div>\n    {/* <div className=\"toastify-body\">\n      <span>to Kiemdinhoto.vn. Now you can start to explore. Enjoy!</span>\n    </div> */}\n  </Fragment>\n);\nconst schema = yup.object(SCHEMA_LOGIN).required();\nconst Login = (props) => {\n  const [skin] = useSkin();\n\n  const dispatch = useDispatch();\n  const [disable, setDisable] = useState(false);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    \n    resolver: yupResolver(schema),\n    mode: \"all\",\n  });\n  const illustration = skin === \"dark\" ? \"login-v2-dark.svg\" : \"login-v2.svg\",\n    source = require(`@Assets/images/pages/${illustration}`).default;\n\n  const onSubmit = (data) => {\n    if (isObjEmpty(errors)) {\n      setDisable(true);\n      Service.send({\n        method: api.EMPLOYEE_LOGIN.method,\n        path: api.EMPLOYEE_LOGIN.path,\n        data,\n      }).then((result) => {\n        if (result) {\n          const { status, access_token, refresh_token, information } = result;\n          if (status === 200) {\n            const newData = {\n              information,\n              accessToken: access_token,\n              refreshToken: refresh_token,\n            };\n            dispatch(handleLogin(newData));\n            // history(getHomeRouteForLoggedInUser('admin'))\n            toast.success(\n              <ToastContent\n                name={\n                  newData.information.name ||\n                  newData.information.username ||\n                  \"John Doe\"\n                }\n                roleName={newData.roleName || \"\"}\n              />,\n              { transition: Slide, hideProgressBar: true, autoClose: 2000 }\n            );\n            setTimeout(() => {\n              window.location.href = getHomeRouteForLoggedInUser(\"admin\");\n            }, 1500);\n          }\n          else {\n            setDisable(false);\n          }\n        }\n      });\n    }\n  };\n\n  return (\n    <div className=\"auth-wrapper auth-v2\">\n      <Row className=\"auth-inner m-0\">\n        <Col className=\"d-none d-lg-flex align-items-center p-5\" lg=\"8\" sm=\"12\">\n          <div className=\"w-100 d-lg-flex align-items-center justify-content-center px-5\">\n            <img className=\"img-fluid\" src={source} alt=\"Login V2\" />\n          </div>\n        </Col>\n        <Col\n          className=\"d-flex align-items-center auth-bg px-2 p-lg-5\"\n          lg=\"4\"\n          sm=\"12\"\n        >\n          <Col className=\"px-xl-2 mx-auto\" sm=\"8\" md=\"6\" lg=\"12\">\n            <CardTitle tag=\"h2\" className=\"font-weight-bold mb-1\">\n              Đăng nhập! 👋\n            </CardTitle>\n\n            <Form\n              className=\"auth-login-form mt-2\"\n              onSubmit={handleSubmit(onSubmit)}\n            >\n              {/* <Col md='6' sm='12'>\n            <FormGroup>\n              <Label for='validState'>Valid State</Label>\n              <Input type='text' id='validState' name='validState' valid />\n              <FormFeedback valid>Sweet! That name is available.</FormFeedback>\n            </FormGroup>\n          </Col>\n          <Col md='6' sm='12'>\n            <FormGroup>\n              <Label for='invalidState'>Invalid State</Label>\n              <Input type='text' id='invalidState' name='invalidState' invalid />\n              <FormFeedback>Oh no! That name is already taken.</FormFeedback>\n            </FormGroup>\n          </Col> */}\n              <FormGroup>\n                <Label className=\"form-label\" for=\"login-username\">\n                  Tên tài khoản\n                </Label>\n                <Input\n                  name=\"username\"\n                  className={classnames({ \"is-invalid\": errors[\"username\"] })}\n                  innerRef={register}\n                />\n                <p className=\"text-danger\">{errors.username?.message}</p>\n              </FormGroup>\n              <FormGroup>\n                <div className=\"d-flex justify-content-between\">\n                  <Label className=\"form-label\" for=\"login-password\">\n                    Mật khẩu\n                  </Label>\n                  <Link to=\"/cms/forgot-password\">\n                    <small>Quên mật khẩu?</small>\n                  </Link>\n                </div>\n                <InputPasswordToggle\n                  name=\"password\"\n                  className={classnames({ \"is-invalid\": errors[\"password\"] })}\n                  innerRef={register}\n                />\n                <p className=\"text-danger\">{errors.password?.message}</p>\n              </FormGroup>\n              {/* <FormGroup>\n                <CustomInput\n                  type=\"checkbox\"\n                  className=\"custom-control-Primary\"\n                  id=\"remember-me\"\n                  label=\"Remember Me\"\n                />\n              </FormGroup> */}\n\n\n              <Button.Ripple\n                type=\"submit\"\n                color=\"primary\"\n                block\n                disabled={disable}\n              >\n                {disable ? (\n                  <>\n                    <Spinner size=\"sm\" />\n                    <span className=\"ml-50\">Đang đăng nhập...</span>\n                  </>\n                ) : (\n                  \"Đăng nhập\"\n                )}\n              </Button.Ripple>\n            </Form>\n            {/* <p className='text-center mt-2'>\n              <span className='mr-25'>New on our platform?</span>\n              <Link to='/register'>\n                <span>Create an account</span>\n              </Link>\n            </p>\n            <div className='divider my-2'>\n              <div className='divider-text'>or</div>\n            </div>\n            <div className='auth-footer-btn d-flex justify-content-center'>\n              <Button.Ripple color='facebook'>\n                <Facebook size={14} />\n              </Button.Ripple>\n              <Button.Ripple color='twitter'>\n                <Twitter size={14} />\n              </Button.Ripple>\n              <Button.Ripple color='google'>\n                <Mail size={14} />\n              </Button.Ripple>\n              <Button.Ripple className='mr-0' color='github'>\n                <GitHub size={14} />\n              </Button.Ripple>\n            </div>\n          */}\n          </Col>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}