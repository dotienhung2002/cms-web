{"ast":null,"code":"// @ts-nocheck\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { FORMAT_ERROR } from \"./../constants/status\";\nimport { getQueryString } from \"./common\";\n\nfunction send(Request) {\n  const {\n    method = \"GET\",\n    path,\n    data,\n    query,\n    headers = {},\n    newUrl\n  } = Request;\n  return new Promise(resolve => {\n    let url = `${path}${getQueryString(query)}`;\n\n    if (newUrl) {\n      url = `${newUrl}${getQueryString(query)}`;\n    }\n\n    let token = window.localStorage.getItem(\"accessToken\");\n\n    if (token) {\n      const newToken = token.replace(/\"/g, \"\");\n      headers.Authorization = newToken;\n    }\n\n    axios({\n      method,\n      url,\n      data,\n      headers\n    }).then(result => {\n      const data = result.data;\n      return resolve(data);\n    }).catch(error => {\n      const {\n        response = {}\n      } = error;\n      const result = response.data ? response.data : null;\n\n      if (!result) {\n        toast.warn(\"Somethig was wrong\");\n      } else {\n        const {\n          status,\n          message: data\n        } = result;\n\n        if (status === 500) {\n          toast.warn((FORMAT_ERROR === null || FORMAT_ERROR === void 0 ? void 0 : FORMAT_ERROR[result === null || result === void 0 ? void 0 : result.error]) || (result === null || result === void 0 ? void 0 : result.message));\n          return resolve(result);\n        } else if (status === 404) {\n          return resolve(result);\n        } else if (status === 505) {\n          toast.warn(\"Unauthorized\");\n        } else if (status === 401 && data === \"Expired token received for JSON Web Token validation\") {\n          window.localStorage.clear();\n          window.location.href = \"/\";\n        } else if (status === 401 && data === \"Unauthorized\" || status === 403 && data === \"InvalidToken\") {\n          window.localStorage.clear();\n          window.location.href = \"/\";\n        } else if (status) {\n          toast.warn(data || \"Somethig was wrong\");\n        } else {\n          return resolve(result.data);\n        }\n      }\n    });\n  });\n}\n\nexport default {\n  send\n};","map":{"version":3,"sources":["/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/src/helper/request.tsx"],"names":["axios","toast","FORMAT_ERROR","getQueryString","send","Request","method","path","data","query","headers","newUrl","Promise","resolve","url","token","window","localStorage","getItem","newToken","replace","Authorization","then","result","catch","error","response","warn","status","message","clear","location","href"],"mappings":"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","sourcesContent":["// @ts-nocheck\nimport axios from \"axios\";\nimport { HOST } from \"../constants/url\";\nimport { toast } from \"react-toastify\";\nimport { FORMAT_ERROR } from \"./../constants/status\";\n\nimport { getQueryString } from \"./common\";\nimport Irequest from \"@Constants/models/requestInterface\";\nfunction send(Request: Irequest) {\n  const { method = \"GET\", path, data, query, headers = {}, newUrl } = Request;\n  return new Promise((resolve) => {\n    let url = `${path}${getQueryString(query)}`;\n    if (newUrl) {\n      url = `${newUrl}${getQueryString(query)}`;\n    }\n    let token = window.localStorage.getItem(\"accessToken\");\n\n    if (token) {\n      const newToken = token.replace(/\"/g, \"\");\n      headers.Authorization = newToken;\n    }\n\n    axios({\n      method,\n      url,\n      data,\n      headers,\n    })\n      .then((result) => {\n        const data = result.data;\n        return resolve(data);\n      })\n      .catch((error) => {\n        const { response = {} } = error;\n\n        const result = response.data ? response.data : null;\n      \n        if (!result) {\n          toast.warn(\"Somethig was wrong\");\n        } else {\n          const { status, message: data } = result;\n          if (status === 500) {\n            toast.warn(FORMAT_ERROR?.[result?.error] || result?.message);\n            return resolve(result);\n\n          }\n          else if (status === 404) {\n            return resolve(result);\n          } else if (status === 505) {\n            toast.warn(\"Unauthorized\");\n          } else if (\n            status === 401 &&\n            data === \"Expired token received for JSON Web Token validation\"\n          ) {\n            window.localStorage.clear();\n            window.location.href = \"/\";\n          } else if (\n            (status === 401 && data === \"Unauthorized\") ||\n            (status === 403 && data === \"InvalidToken\")\n          ) {\n            window.localStorage.clear();\n            window.location.href = \"/\";\n          } else if (status) {\n            toast.warn(data || \"Somethig was wrong\");\n          } else {\n            return resolve(result.data);\n          }\n        }\n      });\n  });\n}\n\nexport default {\n  send,\n};\n"]},"metadata":{},"sourceType":"module"}