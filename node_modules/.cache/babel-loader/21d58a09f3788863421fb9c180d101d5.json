{"ast":null,"code":"import _slicedToArray from\"/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// ** React Imports\nimport{Fragment,useState,useEffect,memo}from'react';// ** Table Columns\nimport{serverSideColumns}from'../data';// ** Store & Actions\nimport{getData}from'../store/actions';import{useSelector,useDispatch}from'react-redux';// ** Third Party Components\nimport ReactPaginate from'react-paginate';import{ChevronDown}from'react-feather';import DataTable from'react-data-table-component';import{Card,CardHeader,CardTitle,Input,Label,Row,Col}from'reactstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DataTableServerSide=function DataTableServerSide(){// ** Store Vars\nvar dispatch=useDispatch();var store=useSelector(function(state){return state.dataTables;});// ** States\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(7),_useState4=_slicedToArray(_useState3,2),rowsPerPage=_useState4[0],setRowsPerPage=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchValue=_useState6[0],setSearchValue=_useState6[1];// ** Get data on mount\nuseEffect(function(){dispatch(getData({page:currentPage,perPage:rowsPerPage,q:searchValue}));},[dispatch]);// ** Function to handle filter\nvar handleFilter=function handleFilter(e){setSearchValue(e.target.value);dispatch(getData({page:currentPage,perPage:rowsPerPage,q:e.target.value}));};// ** Function to handle Pagination and get data\nvar handlePagination=function handlePagination(page){dispatch(getData({page:page.selected+1,perPage:rowsPerPage,q:searchValue}));setCurrentPage(page.selected+1);};// ** Function to handle per page\nvar handlePerPage=function handlePerPage(e){dispatch(getData({page:currentPage,perPage:parseInt(e.target.value),q:searchValue}));setRowsPerPage(parseInt(e.target.value));};// ** Custom Pagination\nvar CustomPagination=function CustomPagination(){var count=Number((store.total/rowsPerPage).toFixed(0));return/*#__PURE__*/_jsx(ReactPaginate,{previousLabel:'',nextLabel:'',breakLabel:\"...\",pageCount:count||1,marginPagesDisplayed:2,pageRangeDisplayed:2,activeClassName:\"active\",forcePage:currentPage!==0?currentPage-1:0,onPageChange:function onPageChange(page){return handlePagination(page);},pageClassName:'page-item',nextLinkClassName:'page-link',nextClassName:'page-item next',previousClassName:'page-item prev',previousLinkClassName:'page-link',pageLinkClassName:'page-link',breakClassName:\"page-item\",breakLinkClassName:\"page-link\",containerClassName:'pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1'});};// ** Table data to render\nvar dataToRender=function dataToRender(){var filters={q:searchValue};var isFiltered=Object.keys(filters).some(function(k){return filters[k].length>0;});if(store.data.length>0){return store.data;}else if(store.data.length===0&&isFiltered){return[];}else{return store.allData.slice(0,rowsPerPage);}};return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{className:\"border-bottom\",children:/*#__PURE__*/_jsx(CardTitle,{tag:\"h4\",children:\"Server Side\"})}),/*#__PURE__*/_jsxs(Row,{className:\"mx-0 mt-1 mb-50\",children:[/*#__PURE__*/_jsx(Col,{sm:\"6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Label,{for:\"sort-select\",children:\"show\"}),/*#__PURE__*/_jsxs(Input,{className:\"dataTable-select\",type:\"select\",id:\"sort-select\",value:rowsPerPage,onChange:function onChange(e){return handlePerPage(e);},children:[/*#__PURE__*/_jsx(\"option\",{value:7,children:\"7\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:25,children:\"25\"}),/*#__PURE__*/_jsx(\"option\",{value:50,children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:75,children:\"75\"}),/*#__PURE__*/_jsx(\"option\",{value:100,children:\"100\"})]}),/*#__PURE__*/_jsx(Label,{for:\"sort-select\",children:\"entries\"})]})}),/*#__PURE__*/_jsxs(Col,{className:\"d-flex align-items-center justify-content-sm-end mt-sm-0 mt-1\",sm:\"6\",children:[/*#__PURE__*/_jsx(Label,{className:\"mr-1\",for:\"search-input\",children:\"Search\"}),/*#__PURE__*/_jsx(Input,{className:\"dataTable-filter\",type:\"text\",bsSize:\"sm\",id:\"search-input\",value:searchValue,onChange:handleFilter})]})]}),/*#__PURE__*/_jsx(DataTable,{noHeader:true,pagination:true,paginationServer:true,className:\"react-dataTable\",columns:serverSideColumns,sortIcon:/*#__PURE__*/_jsx(ChevronDown,{size:10}),paginationComponent:CustomPagination,data:dataToRender()})]})});};export default/*#__PURE__*/memo(DataTableServerSide);","map":{"version":3,"names":["Fragment","useState","useEffect","memo","serverSideColumns","getData","useSelector","useDispatch","ReactPaginate","ChevronDown","DataTable","Card","CardHeader","CardTitle","Input","Label","Row","Col","DataTableServerSide","dispatch","store","state","dataTables","currentPage","setCurrentPage","rowsPerPage","setRowsPerPage","searchValue","setSearchValue","page","perPage","q","handleFilter","e","target","value","handlePagination","selected","handlePerPage","parseInt","CustomPagination","count","Number","total","toFixed","dataToRender","filters","isFiltered","Object","keys","some","k","length","data","allData","slice"],"sources":["/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/src/views/tables/data-tables/advance/TableServerSide.js"],"sourcesContent":["// ** React Imports\nimport { Fragment, useState, useEffect, memo } from 'react'\n\n// ** Table Columns\nimport { serverSideColumns } from '../data'\n\n// ** Store & Actions\nimport { getData } from '../store/actions'\nimport { useSelector, useDispatch } from 'react-redux'\n\n// ** Third Party Components\nimport ReactPaginate from 'react-paginate'\nimport { ChevronDown } from 'react-feather'\nimport DataTable from 'react-data-table-component'\nimport { Card, CardHeader, CardTitle, Input, Label, Row, Col } from 'reactstrap'\n\nconst DataTableServerSide = () => {\n  // ** Store Vars\n  const dispatch = useDispatch()\n  const store = useSelector(state => state.dataTables)\n\n  // ** States\n  const [currentPage, setCurrentPage] = useState(1)\n  const [rowsPerPage, setRowsPerPage] = useState(7)\n  const [searchValue, setSearchValue] = useState('')\n\n  // ** Get data on mount\n  useEffect(() => {\n    dispatch(\n      getData({\n        page: currentPage,\n        perPage: rowsPerPage,\n        q: searchValue\n      })\n    )\n  }, [dispatch])\n\n  // ** Function to handle filter\n  const handleFilter = e => {\n    setSearchValue(e.target.value)\n\n    dispatch(\n      getData({\n        page: currentPage,\n        perPage: rowsPerPage,\n        q: e.target.value\n      })\n    )\n  }\n\n  // ** Function to handle Pagination and get data\n  const handlePagination = page => {\n    dispatch(\n      getData({\n        page: page.selected + 1,\n        perPage: rowsPerPage,\n        q: searchValue\n      })\n    )\n    setCurrentPage(page.selected + 1)\n  }\n\n  // ** Function to handle per page\n  const handlePerPage = e => {\n    dispatch(\n      getData({\n        page: currentPage,\n        perPage: parseInt(e.target.value),\n        q: searchValue\n      })\n    )\n    setRowsPerPage(parseInt(e.target.value))\n  }\n\n  // ** Custom Pagination\n  const CustomPagination = () => {\n    const count = Number((store.total / rowsPerPage).toFixed(0))\n\n    return (\n      <ReactPaginate\n        previousLabel={''}\n        nextLabel={''}\n        breakLabel='...'\n        pageCount={count || 1}\n        marginPagesDisplayed={2}\n        pageRangeDisplayed={2}\n        activeClassName='active'\n        forcePage={currentPage !== 0 ? currentPage - 1 : 0}\n        onPageChange={page => handlePagination(page)}\n        pageClassName={'page-item'}\n        nextLinkClassName={'page-link'}\n        nextClassName={'page-item next'}\n        previousClassName={'page-item prev'}\n        previousLinkClassName={'page-link'}\n        pageLinkClassName={'page-link'}\n        breakClassName='page-item'\n        breakLinkClassName='page-link'\n        containerClassName={\n          'pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1'\n        }\n      />\n    )\n  }\n\n  // ** Table data to render\n  const dataToRender = () => {\n    const filters = {\n      q: searchValue\n    }\n\n    const isFiltered = Object.keys(filters).some(function (k) {\n      return filters[k].length > 0\n    })\n\n    if (store.data.length > 0) {\n      return store.data\n    } else if (store.data.length === 0 && isFiltered) {\n      return []\n    } else {\n      return store.allData.slice(0, rowsPerPage)\n    }\n  }\n\n  return (\n    <Fragment>\n      <Card>\n        <CardHeader className='border-bottom'>\n          <CardTitle tag='h4'>Server Side</CardTitle>\n        </CardHeader>\n        <Row className='mx-0 mt-1 mb-50'>\n          <Col sm='6'>\n            <div className='d-flex align-items-center'>\n              <Label for='sort-select'>show</Label>\n              <Input\n                className='dataTable-select'\n                type='select'\n                id='sort-select'\n                value={rowsPerPage}\n                onChange={e => handlePerPage(e)}\n              >\n                <option value={7}>7</option>\n                <option value={10}>10</option>\n                <option value={25}>25</option>\n                <option value={50}>50</option>\n                <option value={75}>75</option>\n                <option value={100}>100</option>\n              </Input>\n              <Label for='sort-select'>entries</Label>\n            </div>\n          </Col>\n          <Col className='d-flex align-items-center justify-content-sm-end mt-sm-0 mt-1' sm='6'>\n            <Label className='mr-1' for='search-input'>\n              Search\n            </Label>\n            <Input\n              className='dataTable-filter'\n              type='text'\n              bsSize='sm'\n              id='search-input'\n              value={searchValue}\n              onChange={handleFilter}\n            />\n          </Col>\n        </Row>\n        <DataTable\n          noHeader\n          pagination\n          paginationServer\n          className='react-dataTable'\n          columns={serverSideColumns}\n          sortIcon={<ChevronDown size={10} />}\n          paginationComponent={CustomPagination}\n          data={dataToRender()}\n        />\n      </Card>\n    </Fragment>\n  )\n}\n\nexport default memo(DataTableServerSide)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}