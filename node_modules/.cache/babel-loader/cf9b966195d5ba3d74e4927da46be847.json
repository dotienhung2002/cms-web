{"ast":null,"code":"import _slicedToArray from\"/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import*as yup from\"yup\";import classnames from\"classnames\";import{useForm}from\"react-hook-form\";import{yupResolver}from\"@hookform/resolvers/yup\";import{Form,FormGroup,Row,Col,Button}from\"reactstrap\";import InputPasswordToggle from\"@Components/input-password-toggle\";import{SCHEMA_CHANGE_PASSWORD,SCHEMA_LOGIN}from\"@Constants/constValidate\";import api from\"@Constants/api\";import{getHomeRouteForLoggedInUser,isObjEmpty}from\"@Utils\";import Service from\"../../../helper/request\";import{toast}from\"react-toastify\";import{useSelector}from\"react-redux\";import{Spinner}from\"reactstrap\";import{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var schema=yup.object(SCHEMA_CHANGE_PASSWORD).required();var PasswordTabContent=function PasswordTabContent(){var _errors$current_passw,_errors$new_password,_errors$retype_new_pa;var _useForm=useForm({resolver:yupResolver(schema),mode:\"all\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,reset=_useForm.reset;var _useState=useState(),_useState2=_slicedToArray(_useState,2),disable=_useState2[0],setDisable=_useState2[1];var history=useHistory();var store=useSelector(function(state){return state.auth;});var onSubmit=function onSubmit(values){if(isObjEmpty(errors)){setDisable(true);Service.send({method:api.EMPLOYEE_CHANGE_PASSWORD.method,path:api.EMPLOYEE_CHANGE_PASSWORD.path,data:{current_password:values.current_password,new_password:values.new_password,username:store.userData.username}}).then(function(result){if(result){var status=result.status,access_token=result.access_token,refresh_token=result.refresh_token,information=result.information;if(status===200){toast.success(\"Đổi mật khẩu thành công\");reset();setDisable(true);setTimeout(function(){localStorage.clear();window.location.href=\"/\";},[3000]);}else{setDisable(false);}}});}};return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{sm:\"6\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(InputPasswordToggle,{label:\"M\\u1EADt kh\\u1EA9u c\\u0169\",htmlFor:\"M\\u1EADt kh\\u1EA9u c\\u0169\",name:\"current_password\",className:classnames({\"is-invalid\":errors[\"current_password\"]}),innerRef:register}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:(_errors$current_passw=errors.current_password)===null||_errors$current_passw===void 0?void 0:_errors$current_passw.message})]})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:\"6\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(InputPasswordToggle,{label:\"M\\u1EADt kh\\u1EA9u m\\u1EDBi\",htmlFor:\"M\\u1EADt kh\\u1EA9u m\\u1EDBi\",name:\"new_password\",className:classnames({\"is-invalid\":errors[\"new_password\"]}),innerRef:register}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:(_errors$new_password=errors.new_password)===null||_errors$new_password===void 0?void 0:_errors$new_password.message})]})}),/*#__PURE__*/_jsx(Col,{sm:\"6\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(InputPasswordToggle,{label:\"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi\",htmlFor:\"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u m\\u1EDBi\",name:\"retype_new_password\",className:classnames({\"is-invalid\":errors[\"retype_new_password\"]}),innerRef:register}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:(_errors$retype_new_pa=errors.retype_new_password)===null||_errors$retype_new_pa===void 0?void 0:_errors$retype_new_pa.message})]})}),/*#__PURE__*/_jsxs(Col,{className:\"mt-1\",sm:\"12\",children:[/*#__PURE__*/_jsx(Button.Ripple,{className:\"mr-1\",color:\"primary\",type:\"submit\",disabled:disable,children:disable?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-50\",children:\"Vui l\\xF2ng \\u0111\\u1EE3i...\"})]}):\"Đổi mật khẩu\"}),/*#__PURE__*/_jsx(Button.Ripple,{color:\"secondary\",outline:true,onClick:function onClick(){return history(\"/\");},children:\"Hu\\u1EF7\"})]})]})]});};export default PasswordTabContent;","map":{"version":3,"names":["yup","classnames","useForm","yupResolver","Form","FormGroup","Row","Col","Button","InputPasswordToggle","SCHEMA_CHANGE_PASSWORD","SCHEMA_LOGIN","api","getHomeRouteForLoggedInUser","isObjEmpty","Service","toast","useSelector","Spinner","useState","useHistory","schema","object","required","PasswordTabContent","resolver","mode","register","handleSubmit","errors","formState","reset","disable","setDisable","history","store","state","auth","onSubmit","values","send","method","EMPLOYEE_CHANGE_PASSWORD","path","data","current_password","new_password","username","userData","then","result","status","access_token","refresh_token","information","success","setTimeout","localStorage","clear","window","location","href","message","retype_new_password"],"sources":["/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/src/views/pages/account-settings/PasswordTabContent.js"],"sourcesContent":["import * as yup from \"yup\";\nimport classnames from \"classnames\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { Form, FormGroup, Row, Col, Button } from \"reactstrap\";\nimport InputPasswordToggle from \"@Components/input-password-toggle\";\nimport { SCHEMA_CHANGE_PASSWORD, SCHEMA_LOGIN } from \"@Constants/constValidate\";\nimport api from \"@Constants/api\";\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from \"@Utils\";\nimport Service from \"../../../helper/request\";\n\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport { Spinner } from \"reactstrap\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nconst schema = yup.object(SCHEMA_CHANGE_PASSWORD).required();\n\nconst PasswordTabContent = () => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n  } = useForm({\n    resolver: yupResolver(schema),\n    mode: \"all\",\n  });\n  const [disable, setDisable] = useState();\n  const history = useHistory();\n  const store = useSelector((state) => state.auth);\n  const onSubmit = (values) => {\n    if (isObjEmpty(errors)) {\n      setDisable(true);\n      Service.send({\n        method: api.EMPLOYEE_CHANGE_PASSWORD.method,\n        path: api.EMPLOYEE_CHANGE_PASSWORD.path,\n        data: {\n          current_password: values.current_password,\n          new_password: values.new_password,\n          username: store.userData.username,\n        },\n      }).then((result) => {\n        if (result) {\n          const { status, access_token, refresh_token, information } = result;\n          if (status === 200) {\n            toast.success(\"Đổi mật khẩu thành công\");\n            reset();\n            setDisable(true);\n            setTimeout(() => {\n              localStorage.clear();\n              window.location.href = \"/\";\n            }, [3000]);\n          } else {\n            setDisable(false);\n          }\n        }\n      });\n    }\n  };\n\n  return (\n    <Form onSubmit={handleSubmit(onSubmit)}>\n      <Row>\n        <Col sm=\"6\">\n          <FormGroup>\n            <InputPasswordToggle\n              label=\"Mật khẩu cũ\"\n              htmlFor=\"Mật khẩu cũ\"\n              name=\"current_password\"\n              className={classnames({\n                \"is-invalid\": errors[\"current_password\"],\n              })}\n              innerRef={register}\n            />\n            <p className=\"text-danger\">{errors.current_password?.message}</p>\n          </FormGroup>\n        </Col>\n      </Row>\n      <Row>\n        <Col sm=\"6\">\n          <FormGroup>\n            <InputPasswordToggle\n              label=\"Mật khẩu mới\"\n              htmlFor=\"Mật khẩu mới\"\n              name=\"new_password\"\n              className={classnames({ \"is-invalid\": errors[\"new_password\"] })}\n              innerRef={register}\n            />\n            <p className=\"text-danger\">{errors.new_password?.message}</p>\n          </FormGroup>\n        </Col>\n        <Col sm=\"6\">\n          <FormGroup>\n            <InputPasswordToggle\n              label=\"Nhập lại mật khẩu mới\"\n              htmlFor=\"Nhập lại mật khẩu mới\"\n              name=\"retype_new_password\"\n              className={classnames({\n                \"is-invalid\": errors[\"retype_new_password\"],\n              })}\n              innerRef={register}\n            />\n            <p className=\"text-danger\">{errors.retype_new_password?.message}</p>\n          </FormGroup>\n        </Col>\n        <Col className=\"mt-1\" sm=\"12\">\n          <Button.Ripple\n            className=\"mr-1\"\n            color=\"primary\"\n            type=\"submit\"\n            disabled={disable}\n          >\n            {disable ? (\n              <>\n                <Spinner size=\"sm\" />\n                <span className=\"ml-50\">Vui lòng đợi...</span>\n              </>\n            ) : (\n              \"Đổi mật khẩu\"\n            )}\n          </Button.Ripple>\n          <Button.Ripple\n            color=\"secondary\"\n            outline\n            onClick={() => history(\"/\")}\n          >\n            Huỷ\n          </Button.Ripple>\n        </Col>\n      </Row>\n    </Form>\n  );\n};\n\nexport default PasswordTabContent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}