{"ast":null,"code":"import _slicedToArray from \"/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/src/views/pages/authentication/Login.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport Avatar from \"@Components/avatar\";\nimport InputPasswordToggle from \"@Components/input-password-toggle\";\nimport { SCHEMA_LOGIN } from \"@Constants/constValidate\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useSkin } from \"@Hooks/useSkin\";\nimport { handleLogin } from \"@Store/actions/auth\";\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from \"@Utils\";\nimport classnames from \"classnames\";\nimport { Fragment, useState } from \"react\";\nimport { Coffee } from \"react-feather\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { Slide, toast } from \"react-toastify\";\nimport { Button, CardTitle, Col, Form, FormGroup, Input, Label, Row, Spinner } from \"reactstrap\";\nimport * as yup from \"yup\";\nimport Service from \"../../../helper/request\";\nimport api from \"@Constants/api\";\nimport \"@Styles/base/pages/page-auth.scss\";\nimport { Link } from \"react-router-dom\";\nimport { Controller } from \"swiper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar ToastContent = function ToastContent(_ref) {\n  var name = _ref.name;\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toastify-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          size: \"sm\",\n          color: \"success\",\n          icon: /*#__PURE__*/_jsxDEV(Coffee, {\n            size: 12\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 49\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"toast-title font-weight-bold\",\n          children: [\"Xin ch\\xE0o, \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 3\n  }, _this);\n};\n_c = ToastContent;\nvar schema = yup.object(SCHEMA_LOGIN).required();\nvar Login = function Login(props) {\n  _s();\n  var _useSkin = useSkin(),\n    _useSkin2 = _slicedToArray(_useSkin, 1),\n    skin = _useSkin2[0];\n  var dispatch = useDispatch();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    disable = _useState2[0],\n    setDisable = _useState2[1];\n  var _useForm = useForm({\n      resolver: yupResolver(schema),\n      mode: \"all\"\n    }),\n    handleSubmit = _useForm.handleSubmit,\n    control = _useForm.control,\n    errors = _useForm.formState.errors;\n  // const illustration = skin === \"dark\" ? \"login-v2-dark.svg\" : \"login-v2.svg\",\n  //   source = require(`@Assets/images/pages/${illustration}`).default;\n\n  var onSubmit = function onSubmit(data) {\n    if (isObjEmpty(errors)) {\n      setDisable(true);\n      Service.send({\n        method: api.EMPLOYEE_LOGIN.method,\n        path: api.EMPLOYEE_LOGIN.path,\n        data: data\n      }).then(function (result) {\n        if (result) {\n          var status = result.status,\n            access_token = result.access_token,\n            refresh_token = result.refresh_token,\n            information = result.information;\n          if (status === 200) {\n            var newData = {\n              information: information,\n              accessToken: access_token,\n              refreshToken: refresh_token\n            };\n            dispatch(handleLogin(newData));\n            // history(getHomeRouteForLoggedInUser('admin'))\n            toast.success( /*#__PURE__*/_jsxDEV(ToastContent, {\n              name: newData.information.name || newData.information.username || \"John Doe\",\n              roleName: newData.roleName || \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, _this), {\n              transition: Slide,\n              hideProgressBar: true,\n              autoClose: 2000\n            });\n            setTimeout(function () {\n              window.location.href = getHomeRouteForLoggedInUser(\"admin\");\n            }, 1500);\n          } else {\n            setDisable(false);\n          }\n        }\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-wrapper auth-v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, _this);\n};\n_s(Login, \"wKM5MJRweJ+ZQxEBHF2N8ty7+Hc=\", false, function () {\n  return [useSkin, useDispatch, useForm];\n});\n_c2 = Login;\nexport default Login;\nvar _c, _c2;\n$RefreshReg$(_c, \"ToastContent\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"names":["Avatar","InputPasswordToggle","SCHEMA_LOGIN","yupResolver","useSkin","handleLogin","getHomeRouteForLoggedInUser","isObjEmpty","classnames","Fragment","useState","Coffee","useForm","useDispatch","Slide","toast","Button","CardTitle","Col","Form","FormGroup","Input","Label","Row","Spinner","yup","Service","api","Link","Controller","ToastContent","name","schema","object","required","Login","props","skin","dispatch","disable","setDisable","resolver","mode","handleSubmit","control","errors","formState","onSubmit","data","send","method","EMPLOYEE_LOGIN","path","then","result","status","access_token","refresh_token","information","newData","accessToken","refreshToken","success","username","roleName","transition","hideProgressBar","autoClose","setTimeout","window","location","href"],"sources":["/Users/abc/Downloads/Workspace/projectFPT/cms-fusamate/cms-fusamate/cms-fusamte/src/views/pages/authentication/Login.js"],"sourcesContent":["import Avatar from \"@Components/avatar\";\nimport InputPasswordToggle from \"@Components/input-password-toggle\";\nimport { SCHEMA_LOGIN } from \"@Constants/constValidate\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { useSkin } from \"@Hooks/useSkin\";\nimport { handleLogin } from \"@Store/actions/auth\";\nimport { getHomeRouteForLoggedInUser, isObjEmpty } from \"@Utils\";\nimport classnames from \"classnames\";\nimport { Fragment, useState } from \"react\";\nimport { Coffee } from \"react-feather\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { Slide, toast } from \"react-toastify\";\nimport {\n  Button,\n  CardTitle,\n  Col,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n  Row,\n  Spinner,\n} from \"reactstrap\";\nimport * as yup from \"yup\";\nimport Service from \"../../../helper/request\";\n\nimport api from \"@Constants/api\";\nimport \"@Styles/base/pages/page-auth.scss\";\nimport { Link } from \"react-router-dom\";\nimport { Controller } from \"swiper\";\n\nconst ToastContent = ({ name }) => (\n  <Fragment>\n    <div className=\"toastify-header\">\n      <div className=\"title-wrapper\">\n        <Avatar size=\"sm\" color=\"success\" icon={<Coffee size={12} />} />\n        <h6 className=\"toast-title font-weight-bold\">Xin ch√†o, {name}</h6>\n      </div>\n    </div>\n    {/* <div className=\"toastify-body\">\n      <span>to Kiemdinhoto.vn. Now you can start to explore. Enjoy!</span>\n    </div> */}\n  </Fragment>\n);\nconst schema = yup.object(SCHEMA_LOGIN).required();\nconst Login = (props) => {\n  const [skin] = useSkin();\n\n  const dispatch = useDispatch();\n  const [disable, setDisable] = useState(false);\n\n  const {\n    handleSubmit,\n    control,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(schema),\n    mode: \"all\",\n  });\n  // const illustration = skin === \"dark\" ? \"login-v2-dark.svg\" : \"login-v2.svg\",\n  //   source = require(`@Assets/images/pages/${illustration}`).default;\n\n  const onSubmit = (data) => {\n    if (isObjEmpty(errors)) {\n      setDisable(true);\n      Service.send({\n        method: api.EMPLOYEE_LOGIN.method,\n        path: api.EMPLOYEE_LOGIN.path,\n        data,\n      }).then((result) => {\n        if (result) {\n          const { status, access_token, refresh_token, information } = result;\n          if (status === 200) {\n            const newData = {\n              information,\n              accessToken: access_token,\n              refreshToken: refresh_token,\n            };\n            dispatch(handleLogin(newData));\n            // history(getHomeRouteForLoggedInUser('admin'))\n            toast.success(\n              <ToastContent\n                name={\n                  newData.information.name ||\n                  newData.information.username ||\n                  \"John Doe\"\n                }\n                roleName={newData.roleName || \"\"}\n              />,\n              { transition: Slide, hideProgressBar: true, autoClose: 2000 }\n            );\n            setTimeout(() => {\n              window.location.href = getHomeRouteForLoggedInUser(\"admin\");\n            }, 1500);\n          } else {\n            setDisable(false);\n          }\n        }\n      });\n    }\n  };\n\n  return (\n    <div className=\"auth-wrapper auth-v2\">\n      {/* <Row className=\"auth-inner m-0\">\n        <Col className=\"d-none d-lg-flex align-items-center p-5\" lg=\"8\" sm=\"12\">\n          <div className=\"w-100 d-lg-flex align-items-center justify-content-center px-5\">\n            <img className=\"img-fluid\" src={source} alt=\"Login V2\" />\n          </div>\n        </Col>\n        <Col\n          className=\"d-flex align-items-center auth-bg px-2 p-lg-5\"\n          lg=\"4\"\n          sm=\"12\"\n        >\n          <Col className=\"px-xl-2 mx-auto\" sm=\"8\" md=\"6\" lg=\"12\">\n            <CardTitle tag=\"h2\" className=\"font-weight-bold mb-1\">\n              ƒêƒÉng nh·∫≠p! üëã\n            </CardTitle>\n\n            <Form\n              className=\"auth-login-form mt-2\"\n              onSubmit={handleSubmit(onSubmit)}\n            >\n              <FormGroup>\n                <div className=\"d-flex justify-content-between\">\n                  <Label className=\"form-label\" for=\"login-password\">\n                    M·∫≠t kh·∫©u\n                  </Label>\n                  <Link to=\"/cms/forgot-password\">\n                    <small>Qu√™n m·∫≠t kh·∫©u?</small>\n                  </Link>\n                </div>\n                <Controller\n                  name=\"password\"\n                  control={control}\n                  render={({ field }) => (\n                    <InputPasswordToggle\n                      className={classnames({\n                        \"is-invalid\": errors[\"password\"],\n                      })}\n                      {...field}\n                    />\n                  )}\n                />\n                <p className=\"text-danger\">{errors.password?.message}</p>\n              </FormGroup>\n              <Button.Ripple\n                type=\"submit\"\n                color=\"primary\"\n                block\n                disabled={disable}\n              >\n                {disable ? (\n                  <>\n                    <Spinner size=\"sm\" />\n                    <span className=\"ml-50\">ƒêang ƒëƒÉng nh·∫≠p...</span>\n                  </>\n                ) : (\n                  \"ƒêƒÉng nh·∫≠p\"\n                )}\n              </Button.Ripple>\n            </Form>\n          </Col>\n        </Col>\n      </Row> */}\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}